webpackJsonp([19],{224:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(23),i=a.n(n);e.default={data:function(){return{mainMenuActive:{id:"",name:""},umpValidAlert:!1,umpValid:!0,umpName:"",umpAvater:"",copyright:this.getCoryright(),layoutContent:!0}},props:{username:{default:"admin"},avater:{default:i.a},logoLink:{default:"/home/wxa"},umpUrl:{default:"/home/ump/dashboard"},umpId:{default:0},avaterMenu:{default:function(){return[{name:"账号设置",url:""},{name:"退出登录",url:""}]}},wxaAvater:{default:i.a},wxaName:{default:""},ceilingMenu:{default:function(){return[{name:"首页",url:""},{name:"帮助中心",url:""}]}},mainMenu:{default:function(){return[{name:"概况",icon:"cube",sub:[{name:"概况1",url:""},{name:"概况2",url:""}]}]}}},created:function(){var t=this,e=this.$route.fullPath;this.selectMainMenu(e),this.$bus.on("updateMainMenuTitle",this.updateMainMenuTitle),this.$bus.on("updateLayoutContent",this.updateLayoutContent),this.umpId&&(this.fetch("https://api.qingful.com/home/base/get_ump_valid?ump_id="+this.umpId).then(function(e){e&&e.data.code?(t.umpValid=e.data.data,t.umpValid.valid_days<=7&&(t.umpValidAlert=!0)):(t.umpValid=!1,t.umpValidAlert=!0)}),this.fetch("https://api.qingful.com/home/base/get_ump_info?ump_id="+this.umpId).then(function(e){e&&e.data.code&&(t.umpName=e.data.data.name,t.umpAvater=t.getAvater(e.data.data.logo))}))},methods:{getMenuName:function(t,e){return t+"-"+e},selectMenu:function(t){if(!this.umpValid)return this.isHttpUrl(this.umpUrl)?void(location.href=this.umpUrl):void this.$router.push(this.umpUrl);var e=t.split("-"),a=this.mainMenu[e[0]].sub[e[1]];this.mainMenuActive={id:this.getMenuName(e[0],e[1]),name:a.name},a.url&&(this.isHttpUrl(a.url)?window.open(a.url,"_blank"):this.$router.push(a.url))},updateMainMenuTitle:function(t){this.mainMenuActive.name=t},selectMainMenu:function(t){for(var e in this.mainMenu)for(var a in this.mainMenu[e].sub)this.mainMenu[e].sub[a].url===t&&(this.mainMenuActive={id:this.getMenuName(e,a),name:this.mainMenu[e].sub[a].name})},clickLogo:function(){this.isHttpUrl(this.logoLink)?window.open(this.logoLink,"_self"):(this.selectMainMenu(this.logoLink),this.$router.push(this.logoLink))},getChangeWxaUrl:function(){return"http://wxa."+this.$Copyright+"/home/wxa"},updateLayoutContent:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layoutContent=t}}}},225:function(t,e){},226:function(t,e){},227:function(t,e,a){t.exports=a.p+"cc19ac7f4d7b1a737a1763cca4e746b3.png"},228:function(t,e,a){a(226),a(225);var n=a(21)(a(224),a(229),"data-v-39410a7e",null);n.options.__file="/Users/heqing/git/qingful-www/src/components/layout.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] layout.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},229:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("div",{staticClass:"layout-ceiling"},[a("div",{staticClass:"layout-ceiling-main"},t._l(t.ceilingMenu,function(e,n){return a("div",{key:"index"},[t.isFn(e.url)?a("a",{on:{click:e.url}},[t._v(t._s(e.name)),t.ceilingMenu.length-1!==n?a("span",[t._v(" | ")]):t._e()]):t._e(),t._v(" "),!t.isFn(e.url)&&t.isHttpUrl(e.url)?a("a",{attrs:{href:e.url}},[t._v(t._s(e.name)),t.ceilingMenu.length-1!==n?a("span",[t._v(" | ")]):t._e()]):t._e(),t._v(" "),t.isFn(e.url)||t.isHttpUrl(e.url)?t._e():a("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name)),t.ceilingMenu.length-1!==n?a("span",[t._v(" | ")]):t._e()])],1)}))]),t._v(" "),a("Menu",{attrs:{mode:"horizontal"}},[a("div",{staticClass:"layout-nav"},[a("div",{staticClass:"layout-logo"},[a("a",{on:{click:t.clickLogo}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getLogo(),expression:"getLogo()"}],staticStyle:{height:"40px"}})])]),t._v(" "),a("div",{staticClass:"layout-assistant"},[a("Dropdown",{attrs:{trigger:"click"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avater,expression:"avater"}],staticStyle:{"margin-top":"15px"}}),t._v(" "),a("Dropdown-menu",{staticStyle:{"text-align":"center",width:"100px",overflow:"hidden"},slot:"list"},[a("div",{staticStyle:{height:"90px"}},[a("div",{staticStyle:{height:"40px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avater,expression:"avater"}],staticStyle:{"margin-top":"15px"}})]),t._v(" "),a("div",{staticClass:"text_overflow text_overflow_line_1"},[t._v(t._s(t.username))])]),t._v(" "),t._l(t.avaterMenu,function(e,n){return a("div",{key:n},[t.isHttpUrl(e.url)?t._e():a("router-link",{attrs:{to:e.url}},[a("Dropdown-item",[t._v(t._s(e.name))])],1),t._v(" "),t.isHttpUrl(e.url)?a("a",{attrs:{href:e.url}},[a("Dropdown-item",[t._v(t._s(e.name))])],1):t._e()],1)})],2)],1)],1),t._v(" "),t.wxaName&&t.wxaAvater?a("div",{staticClass:"layout-assistant"},[a("Dropdown",{attrs:{trigger:"click"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.wxaAvater,expression:"wxaAvater"}],staticStyle:{"margin-top":"15px"}}),t._v(" "),a("Dropdown-menu",{staticStyle:{"text-align":"center",width:"100px",overflow:"hidden"},slot:"list"},[a("div",{staticStyle:{height:"90px"}},[a("div",{staticStyle:{height:"40px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.wxaAvater,expression:"wxaAvater"}],staticStyle:{"margin-top":"15px"}})]),t._v(" "),a("div",{staticClass:"text_overflow text_overflow_line_1"},[t._v(t._s(t.wxaName))])]),t._v(" "),a("div",[t.umpId?t._e():a("router-link",{attrs:{to:"/home/wxa"}},[a("Dropdown-item",[t._v("切换小程序")])],1),t._v(" "),t.umpId?a("a",{attrs:{href:t.getChangeWxaUrl()}},[a("Dropdown-item",[t._v("切换小程序")])],1):t._e()],1)])],1)],1):t._e(),t._v(" "),t.umpId?a("div",{staticClass:"layout-assistant"},[a("Dropdown",{attrs:{trigger:"click"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.umpAvater,expression:"umpAvater"}],staticStyle:{"margin-top":"15px"}}),t._v(" "),a("Dropdown-menu",{staticStyle:{"text-align":"center",width:"100px",overflow:"hidden"},slot:"list"},[a("div",{staticStyle:{height:"90px"}},[a("div",{staticStyle:{height:"40px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.umpAvater,expression:"umpAvater"}],staticStyle:{"margin-top":"15px"}})]),t._v(" "),a("div",{staticClass:"text_overflow text_overflow_line_1"},[t._v(t._s(t.umpName))])])])],1)],1):t._e()])]),t._v(" "),t.layoutContent?a("div",{staticClass:"layout-content"},[a("Row",[a("i-col",{attrs:{span:"4"}},[a("Menu",{staticClass:"layout-menu-main",attrs:{"active-name":t.mainMenuActive.id},on:{"on-select":t.selectMenu}},t._l(t.mainMenu,function(e,n){return a("div",{key:"index",staticClass:"layout-menu-main-item"},[a("div",{staticClass:"ivu-menu-item-group-title",staticStyle:{"padding-left":"30px"}},[a("Icon",{attrs:{type:e.icon,size:"18"}}),t._v(" "),a("span",{staticStyle:{"font-size":"16px","margin-left":"3px"}},[t._v(t._s(e.name))])],1),t._v(" "),t._l(e.sub,function(e,i){return a("Menu-item",{key:"i",staticClass:"layout-menu-main-subitem",attrs:{name:t.getMenuName(n,i),url:e.url}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])})],2)}))],1),t._v(" "),a("i-col",{attrs:{span:"20"}},[a("div",{staticClass:"layout-content-main"},[t.umpValidAlert?a("Alert",{staticStyle:{"margin-top":"20px"},attrs:{type:"warning",id:"ump_valid","show-icon":""}},[t.umpValid?t._e():a("template",{slot:"desc"},[t._v("\n                            您当前订购的营销应用已过期，影响正常运营，请订购。\n                            "),t.isHttpUrl(t.umpUrl)?t._e():a("router-link",{attrs:{to:t.umpUrl}},[a("Button",{attrs:{type:"ghost"}},[t._v("立即订购")])],1),t._v(" "),t.isHttpUrl(t.umpUrl)?a("a",{attrs:{href:t.umpUrl}},[a("Button",{attrs:{type:"ghost"}},[t._v("立即订购")])],1):t._e()],1),t._v(" "),t.umpValid?a("template",{slot:"desc"},[t._v("\n                            您当前订购的营销应用即将过期，剩余"+t._s(t.umpValid.valid_days)+"天，影响正常运营，请订购。\n                            "),t.isHttpUrl(t.umpUrl)?t._e():a("router-link",{attrs:{to:t.umpUrl}},[a("Button",{attrs:{type:"ghost"}},[t._v("立即订购")])],1),t._v(" "),t.isHttpUrl(t.umpUrl)?a("a",{attrs:{href:t.umpUrl}},[a("Button",{attrs:{type:"ghost"}},[t._v("立即订购")])],1):t._e()],1):t._e()],2):t._e(),t._v(" "),a("div",{staticClass:"layout-content-main-header"},[a("Row",[t.mainMenuActive.name?a("Col",{staticStyle:{"line-height":"80px"},attrs:{span:"12"}},[t._v("\n                                "+t._s(t.mainMenuActive.name)+"\n                            ")]):t._e(),t._v(" "),t.mainMenuActive.name?t._e():a("Col",{staticStyle:{"line-height":"80px"},attrs:{span:"12"}},[t._v("\n                                  \n                            ")]),t._v(" "),a("Col",{staticStyle:{"text-align":"center","margin-top":"25px"},attrs:{span:"3",offset:"9"}},[t._t("fastMenu")],2)],1)],1),t._v(" "),a("router-view")],1)])],1)],1):t._e(),t._v(" "),t.layoutContent?t._e():a("div",{staticStyle:{"margin-top":"36px"}},[a("router-view")],1),t._v(" "),a("Back-top"),t._v(" "),a("div",{staticClass:"layout-copy"},[t._v("\n        Copyright © 2016 - 2017 "+t._s(t.copyright)+" All Rights Reserved\n    ")])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},264:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(228),i=a.n(n),r=a(227),o=a.n(r);e.default={data:function(){var t=this;return{qrcode:this.getAuthorizationWxaUrl("/home/wxa/code/qrcode"),ceilingMenu:[{name:"营销应用",url:"/home/ump/dashboard"},{name:"基本设置",url:"/home/config/config"},{name:"装修设置",url:"/home/template/dashboard"},{name:"帮助中心",url:function(){t.$bus.emit("guide",!0)}}],mainMenu:[{name:"统计分析",icon:"ios-pie",sub:[{name:"概况分析",url:"/home/analysis/summary"},{name:"用户分析",url:"/home/analysis/user"},{name:"访问分析",url:"/home/analysis/visit"}]},{name:"营销应用",icon:"ios-keypad",sub:[{name:"营销应用",url:"/home/ump/dashboard"}]},{name:"用户管理",icon:"person",sub:[{name:"用户管理",url:"/home/user/user"}]},{name:"资产管理",icon:"ios-calculator",sub:[{name:"我的资产",url:"/home/trade/money"},{name:"交易记录",url:"/home/trade/trade"}]},{name:"基本设置",icon:"ios-gear",sub:[{name:"基本设置",url:"/home/config/config"},{name:"模版消息",url:"/home/config/tplmsg"},{name:"支付设置",url:"/home/config/wxpay"},{name:"装修设置",url:"/home/template/dashboard"}]}],nickname:"",avater:"",avaterMenu:[{name:"账号设置",url:"/home/account"},{name:"退出登录",url:"/home/public/login"}],wxaName:"匿名小程序",wxaAvater:this.getAvaterUrl(),wxaMenu:[{name:"切换小程序",url:"/home/wxa"}],logoLink:"/home/analysis/summary",fastMenu:[{name:"立即预览",icon:o.a}]}},components:{Layout:i.a},created:function(){var t=this;this.storage.then(function(e){e.get("UmpMainMenu").then(function(a){t.mainMenu[1].sub=t.mainMenu[1].sub.concat(JSON.parse(a)),t.fetch("/home/wxa/ump/index").then(function(a){if(a&&a.data.data){var n=[];for(var i in a.data.data)a.data.data[i].ump.url&&n.push({name:a.data.data[i].ump.name,url:a.data.data[i].ump.url});var r=t.getCoryright();for(var o in n)t.isHttpUrl(n[o].url)&&-1==n[o].url.indexOf(r)&&(n[o].url=n[o].url.replace("qingful.com",r));e.set("UmpMainMenu",JSON.stringify(n)),t.mainMenu[1].sub.splice(1,t.mainMenu[1].sub.length-1),t.mainMenu[1].sub=t.mainMenu[1].sub.concat(n)}})}),e.set("Copyright",t.getCoryright())}),this.fetch("/home/base/get_custom_info").then(function(e){e&&e.data.data&&(t.nickname=e.data.data.nickname,t.avater=t.getAvater(e.data.data.avater))}),this.fetch("/home/base/get_wxa_info").then(function(e){e&&e.data.data&&(e.data.data.nick_name&&(t.wxaName=e.data.data.nick_name),e.data.data.head_img&&(t.wxaAvater=e.data.data.head_img))}),this.fetch("/home/config/index/notice").then(function(e){if(e&&e.data.data){var a=0,n=!0,i=!1,r=void 0;try{for(var o,s=e.data.data[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)!function(){var e=o.value;setTimeout(function(){t.$Notice[e.type]({title:e.title,desc:e.desc,duration:e.duration})},a),a+=300}()}catch(t){i=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}})}}},303:function(t,e){},369:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",{attrs:{"avater-menu":t.avaterMenu,"ceiling-menu":t.ceilingMenu,username:t.nickname,avater:t.avater,"main-menu":t.mainMenu,"wxa-name":t.wxaName,"wxa-avater":t.wxaAvater,"wxa-menu":t.wxaMenu,"logo-link":t.logoLink}},[a("div",{slot:"fastMenu"},t._l(t.fastMenu,function(e){return a("div",{staticStyle:{cursor:"pointer"}},[a("div",{staticStyle:{border:"1px solid #eee",padding:"5px","border-radius":"3px"}},[a("Poptip",{attrs:{trigger:"hover",placement:"bottom"}},[t.isStepInStr(e.icon)?t._e():a("Icon",{attrs:{type:e.icon,size:"18",color:"#08b8fd"}}),t._v(" "),t.isStepInStr(e.icon)?a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.icon,expression:"menu.icon"}],staticStyle:{width:"15px","vertical-align":"middle"}}):t._e(),t._v(" "),a("span",{staticClass:"menu-name",staticStyle:{color:"#657180","font-size":"14px","font-weight":"bolder"}},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticStyle:{padding:"0px"},slot:"content"},[a("div",[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.qrcode,expression:"qrcode"}],staticStyle:{width:"140px"}})]),t._v(" "),a("div",{staticStyle:{width:"140px","white-space":"normal"}},[t._v("用微信扫一扫, 如果提示没有体验权限，请点击装修设置=>任何模版=>下一步获取体验二维码=>输入微信号，添加体验者。")])])],1)],1)])}))])},staticRenderFns:[]},t.exports.render._withStripped=!0},86:function(t,e,a){a(303);var n=a(21)(a(264),a(369),null,null);n.options.__file="/Users/heqing/git/qingful-www/src/pages/home/layout.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] layout.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports}});