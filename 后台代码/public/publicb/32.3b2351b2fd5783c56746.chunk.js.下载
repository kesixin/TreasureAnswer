webpackJsonp([32],{277:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(5),n=a.n(o),i=a(23);a.n(i);e.default={data:function(){return{keyword:"",wxa:[],pagination:{page:0,pageCount:0,pageSize:0,rowCount:0},custom:{},copyright:this.getCoryright()}},created:function(){var t=this;this.storage.then(function(t){t.del("WxaToken"),delete n.a.defaults.headers.common.WxaToken}),this.fetch("/home/wxa/public/index").then(function(e){e&&e.data.data&&(t.wxa=e.data.data.data,t.pagination=e.data.data.pagination)}),this.fetch("/home/base/get_custom_info").then(function(e){e&&e.data.data&&(t.custom=e.data.data)})},methods:{openWxa:function(t,e){var a=this;this.storage.then(function(o){if(o.set("WxaToken",t),e.func_info){var n=e.func_info?JSON.parse(e.func_info):{},i={};for(var s in n)i["funcscope_category_"+n[s].funcscope_category.id]=!0;if(!(i.funcscope_category_17&&i.funcscope_category_18&&i.funcscope_category_19&&i.funcscope_category_25))return void a.$router.push("/home/tip/wxa")}a.$router.push("/home/analysis/summary")})},changePage:function(t){var e=this;this.fetch("/home/wxa/public/index?page="+t+"&keyword="+this.keyword).then(function(t){t&&t.data.data&&(e.wxa=t.data.data.data,e.pagination=t.data.data.pagination)})},search:function(){var t=this;this.fetch("/home/wxa/public/index?keyword="+this.keyword).then(function(e){e&&e.data.data&&(t.wxa=e.data.data.data,t.pagination=e.data.data.pagination)})},getCreateWxaRedirectUrl:function(){return this.getAuthorizationUrl("/home/wxa/public/login_referer?redirect="+encodeURIComponent(location.href))}}}},302:function(t,e){},368:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"index"},[a("div",{staticClass:"content"},[a("Row",[a("Col",{staticClass:"logo",attrs:{span:"12"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getLogo(),expression:"getLogo()"}],staticStyle:{height:"40px"}}),t._v(" "),a("div",[t._v("选择小程序")])]),t._v(" "),a("Col",{staticClass:"head_right",attrs:{span:"12"}},[a("span",[t._v(t._s(t.custom.phone))]),t._v(" "),a("a",{staticStyle:{display:"none"},attrs:{href:"http://www.qingful.com",target:"_blank"}},[t._v("帮助")]),t._v(" "),a("router-link",{attrs:{to:"/home/public/login"}},[t._v("退出")])],1)],1),t._v(" "),a("Row",{staticClass:"wrap"},[a("Col",{staticClass:"headImg",attrs:{span:"12"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getAvater(t.custom.avater),expression:"getAvater(custom.avater)"}]}),t._v(" "),a("div",[a("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.custom.nickname))]),a("br"),t._v(" "),a("span",[t._v("账号："+t._s(t.custom.phone)),a("router-link",{attrs:{to:"/home/account"}},[t._v("设置")])],1)])]),t._v(" "),a("Col",{staticClass:"search",attrs:{span:"12"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"搜索小程序"},on:{"on-enter":t.search},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),t._v(" "),a("Button",{on:{click:function(e){t.search()}}},[t._v("搜索")]),t._v(" "),a("br"),t._v(" "),a("a",{attrs:{href:t.getCreateWxaRedirectUrl()}},[t._v("创建小程序")])],1)],1),t._v(" "),a("Row",{staticClass:"myWxa"},[a("Row",[a("div",{staticClass:"title"},[t._v("我管理的小程序")]),t._v(" "),t.wxa.length?t._e():a("Row",{staticStyle:{"text-align":"center","margin-bottom":"60px"}},[a("Row",[a("Col",{attrs:{span:8}},[t._v("\n                     ")]),t._v(" "),a("Col",{attrs:{span:8}},[a("Icon",{attrs:{type:"android-notifications-none",color:"#39f",size:"93"}})],1)],1),t._v(" "),a("Row",{staticStyle:{"margin-top":"12px"}},[a("Col",{attrs:{span:8}},[t._v("\n                     ")]),t._v(" "),a("Col",{attrs:{span:8}},[t._v("\n                    未发现小程序，请先 "),a("a",{attrs:{href:t.getCreateWxaRedirectUrl()}},[t._v("创建小程序")])])],1)],1),t._v(" "),t.wxa.length?a("Row",t._l(t.wxa,function(e,o){return a("Col",{key:o,staticClass:"wxaInfo",attrs:{span:"8"}},[a("Card",{staticStyle:{"border-top":"3px solid #39f",cursor:"pointer","z-index":"100",height:"224px"},nativeOn:{click:function(a){t.openWxa(e.WxaToken,e)}}},[a("p",{staticClass:"text_overflow text_overflow_line_2",staticStyle:{"margin-bottom":"10px"}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.getAvaterUrl(e.head_img),expression:"getAvaterUrl(item.head_img)"}],staticStyle:{width:"30px","border-radius":"50%","vertical-align":"middle"}}),t._v(" "),a("span",{staticStyle:{"font-size":"16px",color:"#222"}},[t._v(t._s(e.nick_name||"匿名小程序"))])]),t._v(" "),a("p",{staticClass:"text_overflow text_overflow_line_2",staticStyle:{height:"42px"}},[t._v("主体信息："+t._s(e.principal_name))]),t._v(" "),a("br"),t._v(" "),a("p",{staticClass:"text_overflow text_overflow_line_3"},[t._v(t._s(e.signature))])])],1)})):t._e()],1),t._v(" "),a("Row",{staticStyle:{"text-align":"center"}},[a("Page",{staticClass:"clearfix",staticStyle:{display:"inline-block"},attrs:{total:t.pagination.rowCount,current:t.pagination.page,"page-size":t.pagination.pageSize,"show-elevator":""},on:{"on-change":t.changePage}})],1)],1),t._v(" "),a("div",{staticClass:"layout-copy"},[t._v("\n            Copyright © 2016 "+t._s(t.copyright)+" All Rights Reserved\n        ")])],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},99:function(t,e,a){a(302);var o=a(21)(a(277),a(368),"data-v-54d72fcd",null);o.options.__file="/Users/heqing/git/qingful-www/src/pages/home/wxa.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] wxa.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports}});